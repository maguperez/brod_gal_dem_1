{% extends 'estudiante/base.html' %}
{% load staticfiles %}
{%block css%}

<link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}"/>
<link rel="stylesheet" href="{% static 'css/owl.theme.css' %}"/>
<style>
    /* A pen by John Mothershed
    http://codepen.io/wiseguy12851/pen/mJZNqN */
.criterio {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  -webkit-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-box-orient: vertical;
  -o-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
}
.green {
  margin-top: 15px;
}
.green .progress,
.red .progress,
.orange .progress {
  position: relative;
  border-radius: 50%;
}
.green .progress,
.red .progress,
.orange .progress {
  width: 100px;
  height: 100px;
}
.green .progress {
  border: 5px solid #27ae60;
}
.green .progress,
.red .progress,
.orange .progress {
  -webkit-transition: all 1s ease;
  transition: all 1s ease;
}
.green .progress .inner,
.red .progress .inner,
.orange .progress .inner {
  position: absolute;
  overflow: hidden;
  z-index: 2;
  border-radius: 50%;
}
.green .progress .inner,
.red .progress .inner,
.orange .progress .inner {
  width: 90px;
  height: 90px;
}
.green .progress .inner,
.red .progress .inner,
.orange .progress .inner {
  border: none;
}
.green .progress .inner,
.red .progress .inner,
.orange .progress .inner {
  -webkit-transition: all 1s ease;
  transition: all 1s ease;
}
.green .progress .inner .water,
.red .progress .inner .water,
.orange .progress .inner .water {
  position: absolute;
  z-index: 1;
  width: 200%;
  height: 200%;
  left: -50%;
  border-radius: 40%;
  -webkit-animation-iteration-count: infinite;
  animation-iteration-count: infinite;
  -webkit-animation-timing-function: linear;
  animation-timing-function: linear;
  -webkit-animation-name: spin;
  animation-name: spin;
}
.green .progress .inner .water {
  top: 25%;
}
.green .progress .inner .water {
  background: #40d47e;
}
.green .progress .inner .water,
.red .progress .inner .water,
.orange .progress .inner .water {
  -webkit-transition: all 1s ease;
  transition: all 1s ease;
}
.green .progress .inner .water,
.red .progress .inner .water,
.orange .progress .inner .water {
  -webkit-animation-duration: 10s;
  animation-duration: 10s;
}
.green .progress .inner .glare,
.red .progress .inner .glare,
.orange .progress .inner .glare {
  position: absolute;
  top: -120%;
  left: -120%;
  z-index: 5;
  width: 200%;
  height: 200%;
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
  border-radius: 50%;
}
.green .progress .inner .glare,
.red .progress .inner .glare,
.orange .progress .inner .glare {
  background-color: rgba(255,255,255,0.15);
}
.green .progress .inner .glare,
.red .progress .inner .glare,
.orange .progress .inner .glare {
  -webkit-transition: all 1s ease;
  transition: all 1s ease;
}
.green .progress .inner .percent,
.red .progress .inner .percent,
.orange .progress .inner .percent {

  z-index:3;
  color: #2c3e50;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  font-weight: bold;
  text-align: center;
}
.green .progress .inner .percent,
.red .progress .inner .percent,
.orange .progress .inner .percent {
  line-height: 90px;
  font-size: 20px;
}
.green .progress .inner .percent,
.red .progress .inner .percent,
.orange .progress .inner .percent {
  -webkit-transition: all 1s ease;
  transition: all 1s ease;
}
.red {
  margin-top: 15px;
}
.red .progress {
  border: 5px solid #c0392b;
}
.red .progress .inner .water {
  top: 75%;
}
.red .progress .inner .water {
  background: #e74c3c;
}
.orange {
  margin-top: 15px;
}
.orange .progress {
  border: 5px solid #d35400;
}
.orange .progress .inner .water {
  top: 50%;
}
.orange .progress .inner .water {
  background: #e67e22;
}
#copyright {
  margin-top: 25px;
  background-color: transparent;
  font-size: 14px;
  color: #b3b3b3;
  text-align: center;
}
#copyright div {
  margin-bottom: 10px;
}
#copyright a,
#copyright a:link {
  color: #808080;
  text-decoration: none;
  border-bottom: 1px solid #808080;
  padding-bottom: 2px;
}
#copyright a:active {
  color: #b3b3b3;
}
#copyright a:hover {
  color: #b3b3b3;
  border-bottom: 1px solid #b3b3b3;
  padding-bottom: 4px;
}
.instructions {
  display: inline-block;
  margin: 5px 0;
  font-size: 16px;
}
@-webkit-keyframes spin {
  from {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  to {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@keyframes spin {
  from {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  to {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

</style>
{%endblock%}
{% block content %}
<script src="{% static 'js/owl.carousel.js' %}"></script>
<script src="{% static 'js/jquery.easypiechart.js' %}"></script>
<script type="text/javascript" src="{% static 'js/rater.min.js' %}"></script>
<link rel="stylesheet" href="{% static 'css/font-awesome.css' %}"/>
<link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}"/>
<link rel="stylesheet" href="{% static 'css/owl.theme.css' %}"/>
<section class="empresa">
    <div class="centered">
        <div class="panel left">
            <div class="box">
                <header>
                    <img src="{{empresa.set_logo}}"/>
                </header>
                <div class="content">
                    <h3 class="link">{{empresa.nombre | upper}}</h3>
                    <label class="descripcion">{{empresa.sector | upper}}</label>
                </div>
            </div>
            <div class="box evaluacion">
                <div class="content">
                    <section class="titulo">
                        <h4 class="link">EVALUACI&Oacute;N DE LA EMPRESA</h4>
                    </section>
                    <section class="rating">
                        <div id="rating-general" style="margin:auto"></div>
                        <div class="clear"></div>
                        <label class="puntaje">{{ranking.ranking_general | floatformat:1 }}</label>
                        <input type="hidden" id="rating-rank" value="{{ranking.ranking_general}}">
                        <a class="btn-action" href="#evaluacion">Eval&uacute;a esta empresa</a>
                    </section>
                </div>
            </div>
        </div>
        <div class="panel right principal">
            <div class="box detail">
                <header class="pos-relative">
                    <div class="slider" id="fade">
                        <div class="owl-carousel">

							<!--<div class="item-video">-->
                                <!--<a class="owl-video" href="http://www.youtube.com/watch?v=0fhoIate4qI"></a>-->
                            <!--</div>-->
							{%if imagenes%}
							{%for i in imagenes.all%}
                            <div class="item">
								<img src="{{i.set_imagen}}"/>
                            </div>
							{%endfor%}
							{%else%}
							 <div class="item">
                                <img src="{%static 'img/imagen-default.png' %}"/>
                            </div>
							{%endif%}
                        </div>
                    </div>
                </header>
                <div class="content">
                    <section class="about">
                        <h3 class="title"><i class="business"></i>Sobre la empresa</h3>

                        <div>
                            <p>{{empresa.quienes_somos}}.</p>
                        </div>
                        <div class="double">
                            <div>
                                <div>
                                    <h4>N&uacute;mero de funcionarios</h4>
                                    <label>{{empresa.numero_funcionarios}}</label>
                                </div>
                                <div>
                                    <h4>Facturamiento anual</h4>
                                    <label>{{empresa.facturacion_anual}}</label>
                                </div>
                                <div>
                                    <h4>Sede Global</h4>
                                    <label>{{empresa.ciudad}}, {{empresa.pais}}</label>
                                </div>
                            </div>
                            <div>
                                <div>
                                    <h4>Sector</h4>
                                    <label>{{empresa.sector}}</label>
                                </div>
                                <div>
                                    <h4>Fundaci&oacute;n</h4>
                                    <label>{{empresa.ano_fundacion}}</label>
                                </div>
                                <div>
                                    <h4>Sitio web</h4>
                                    <a href="{{empresa.website}}">{{empresa.website}}</a>
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                    </section>
                    <section class="evaluacion">
                        <h3 class="title"><i class="like"></i>Evaluaci&oacute;n<span class="comment">(por colaboradores o ex-colaboradores)</span>
                        </h3>

                        <div class="criterios">
                            <div class="criterio">
                                <div id = "ranking_linea_carrera" class="green ">
                                    <div class="progress">
                                      <div class="inner">
                                        <div class="percent">{{ranking.linea_carrera | floatformat:1 }}</div>
                                        <div class="water"></div>
                                        <div class="glare"></div>
                                      </div>
                                    </div>
                                  </div>
                                <label class="nombre">Línea de carrera</label>
                            </div>
                            <div class="criterio">
                                <div id = "ranking_flexibilidad_horarios" class="green ">
                                    <div class="progress">
                                      <div class="inner">
                                        <div class="percent">{{ranking.flexibilidad_horarios | floatformat:1 }}</div>
                                        <div class="water"></div>
                                        <div class="glare"></div>
                                      </div>
                                    </div>
                                  </div>
                                <label class="calificacion"></label>
                                <label class="nombre">Flexibilidad de horarios</label>
                            </div>
                            <div class="criterio">
                                <div id = "ranking_ambiente_trabajo" class="green ">
                                    <div class="progress">
                                      <div class="inner">
                                        <div class="percent">{{ranking.ambiente_trabajo | floatformat:1}}</div>
                                        <div class="water"></div>
                                        <div class="glare"></div>
                                      </div>
                                    </div>
                                  </div>
                                <label class="calificacion"></label>
                                <label class="nombre">Ambiente de trabajo</label>
                            </div>
                            <div class="criterio">
                                <div id = "ranking_salarios" class="green ">
                                    <div class="progress">
                                      <div class="inner">
                                        <div class="percent">{{ranking.salarios | floatformat:1}}</div>
                                        <div class="water"></div>
                                        <div class="glare"></div>
                                      </div>
                                    </div>
                                  </div>
                                <label class="calificacion"></label>
                                <label class="nombre">Salario y Beneficios</label>
                            </div>
                            <div class="clear"></div>
                        </div>
                    </section>
                    <section class="oportunidades">
                        <h3 class="title"><i class="oportunity"></i>Oportunidades</h3>
                        <ul class="list">
                            {% for oportunidad in oportunidades %}
                            <li>
                                <div class="oportunidad-box">
                                    <a class="titulo" href="{%url 'estudiante-oportunidad-detalle' oportunidad.id%}"><h2
                                            class="link">{{oportunidad.titulo | title }}</h2></a>

                                    <div class="descripcion">
                                        <div class="datos">
                                            <div class="empresa"><i class="empresa"></i><label class = "text-uppercase">{{oportunidad.empresa}}</label></div>
                                            <div class="ubicacion"><i class="ubicacion"></i><label>{{oportunidad.ciudad}},
                                                {{oportunidad.pais}}</label></div>
                                            <div class="remuneracion"><i class="remuneracion"></i><label>
                                                {%if oportunidad.remuneracion.id == 3 %}
                                                    {{oportunidad.remuneracion_min}}
                                                {%elif oportunidad.remuneracion.id == 2 %}
                                                    {{oportunidad.remuneracion_max}} - {{oportunidad.remuneracion_min}}
                                                {%else%}
                                                    {{oportunidad.remuneracion}}
                                                {%endif%}
                                            </label>
                                            </div>
                                        </div>
                                        <div class="compatibilidad">
                                            <div class="consolidado">
                                                <div class="circular-bar ">
                                                    <div class="circular-bar-chart" data-percent="73">
                                                        <label><span class="percent">73</span>%</label>
                                                    </div>
                                                </div>
                                                <label class="resultado">Compatible</label>
                                            </div>
                                            <div class="desglose" style="opacity: 0">
                                                <div class="cultural">
                                                    <div class="circular-bar">
                                                        <div class="circular-bar-chart" data-percent="63">
                                                            <label><span class="percent">53</span>%</label>
                                                        </div>
                                                    </div>
                                                    <label class="resultado">Cultural</label>
                                                </div>
                                                <div class="academico">
                                                    <div class="circular-bar">
                                                        <div class="circular-bar-chart" data-percent="49">
                                                            <label><span class="percent">49</span>%</label>
                                                        </div>
                                                    </div>
                                                    <label class="resultado">Académico</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="ver-oportunidad">
                                            <a class="btn-action"
                                               href="{%url 'estudiante-oportunidad-detalle' oportunidad.id%}">VER
                                                OPORTUNIDAD</a>
                                            <label class="cierre">CIERRA EL {{oportunidad.fecha_cese | date:"j.m.Y"}}</label>
                                        </div>
                                        <div class="clear"></div>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                            </li>
                            {% endfor %}
                        </ul>
                        <a class="link ver-mas" href="{%url 'estudiante-oportunidades-empresa' empresa.id%}">Ver m&aacute;s
                            oportunidades</a>
                    </section>
                    <section class="ubicacion">
                        <h3 class="title"><i class="location"></i>Ubicaci&oacute;n</h3>

                        <div style="margin:0 50px">
                            <div id = "id_direccion_map">{{empresa.direccion_map}}</div>
                            <i class = "fa fa-map-marker"></i>
                            <label><b>Latitud:</b></label>
                            <span id = "id_longitud">{{empresa.longitud}}</span> -
                            <label><b>Longitud:</b></label>
                            <span id = "id_latitud">{{empresa.latitud}}</span><br><br>
                        </div>
                        <div id="map" style="height: 350px; width: 100%"></div>
                    </section>
                    <section class="redes">
                        <h3 class="title"><i class="network"></i>Redes sociales</h3>

                        <div>
                            <div class="facebook">
                                <h4><a href="{{redes_sociales.facebook}}"> FACEBOOK</a></h4>
                            </div>
                            <div class="twitter">
                                <h4><a href="{{redes_sociales.twitter}}">TWITTER</a></h4>
                            </div>
                            <div class="clear"></div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
        <div class="clear"></div>
    </div>
</section>
<div class="popup evaluacion-empresa" id="evaluacion">
    <div class="box popup-box">
        <div class="content">
            <section>
                <h3>Eval&uacute;a de manera an&oacute;nima</h3>
                <label class="link empresa">{{empresa.nombre |upper}}</label>
                <label class="descripcion">{{empresa.sector | upper}}</label>

                <div class="calificacion">
                    <img class="imagen" src="{{empresa.set_logo}}" alt="{{empresa.nombre | upper}}"/>
                    <ul class="criterios">
                        <li>
                            <label>L&iacute;nea de carrera</label>

                            <div id="rating-linea_carrera" class = "rating-edit" style="display:inline-block"></div>
                            <input type="hidden" class="rating-hidden" value="{{mi_evaluacion.linea_carrera}}">
                            <div class="clear"></div>
                        </li>
                        <li>
                            <label>Flexibilidad de horarios</label>

                            <div id="rating-flexibilidad_horario" class = "rating-edit" style="display:inline-block"></div>
                            <input type="hidden" class="rating-hidden" value="{{mi_evaluacion.flexibilidad_horarios}}">
                            <div class="clear"></div>
                        </li>
                        <li>
                            <label>Ambiente de trabajo</label>

                            <div id="rating-ambiente_trabajo" class = "rating-edit" style="display:inline-block"></div>
                            <input type="hidden" class="rating-hidden" value="{{mi_evaluacion.ambiente_trabajo}}">
                            <div class="clear"></div>
                        </li>
                        <li>
                            <label>Salario y Beneficios</label>

                            <div id="rating-salario_beneficios" class = "rating-edit" style="display:inline-block"></div>
                            <input type="hidden" class="rating-hidden" value="{{mi_evaluacion.salarios}}">
                            <div class="clear"></div>
                        </li>
                    </ul>
                    <div class="clear"></div>
                </div>
            </section>
            <section>
                <input type="checkbox" id="declaro"/><label for="declaro">Declaro que trabajo o trabaj&eacute; en la
                empresa {{empresa.nombre | upper}}</label>
                <a class="btn-save" id="enviar-evaluacion">Enviar Evaluaci&oacute;n</a>
            </section>
            <section>
                <h4 class="link">Tranquilo ;)</h4>

                <p>La evaluación a la empresa es totalmente anónima; sin embargo, estamos comprometidos en proteger a
                    nuestra comunidad de evaluaciones inadecuadas.</p>

                <p>Por favor, lee las <a class="link" target="_blank" href = "{%url 'terminos-condiciones'%}">Directrices de la Comunidad</a> para obtener más información sobre
                    los criterios de revisión.</p>
            </section>
        </div>
        <a class="close">Cerrar</a>

        <div style="display:none">
            <form class="form-horizontal" enctype="multipart/form-data" action="" method="post">{% csrf_token %}
                {{form.as_p}}
                <input type="submit" id="evaluar">
            </form>
        </div>
    </div>
</div>
<div class="popup aviso" id="resultado-evaluacion">
    <div class="popup-box box">
        <div class="content">
            <section class="header">
                <h4 class="link">¡ENHORABUENA!</h4>
            </section>
            <section class="mensaje">
                <p>La evaluaci&oacute;n se ha registrado satisfactoriamente y se proceder&aacute; con su verificaci&oacute;n
                    para ser publicada. Muchas gracias por colaborar con la comunidad broderjobs.</p>
            </section>
        </div>
        <a class="close">Cerrar</a>
    </div>
</div>
<style>
    .owl-carousel {
        height:369px;
    }
    .owl-controls{
        height: 27px;
    }
    /*
    .owl-carousel .item{
        margin: 3px;
    }
    .owl-carousel .item img{
        display: block;
        width: 100%;
        height: auto;
    }*/
</style>

{% endblock content %}
{% block js %}
<script>
    var animationInterval = 0;
    $(function () {
        $("#declaro").tooltip({
            animation: true,
            placement: "left",
            title: "Debe declarar que trabaja o trabajó en esta empresa",
            trigger: "manual"
        });
        $("#evaluar").on("click", function (e) {
            if (!$("#declaro").is(":checked")) {
                $("#declaro").tooltip("show");
                e.preventDefault();
            }
            else {
                $("#declaro").tooltip("hide");
            }
        });
        $("#link-empresa").addClass("active");

        $('.popup .close').click(function (e) {
            var url = window.location.href;
            var newUrl = url.split('#')[0];
            window.location.href = newUrl;
            $('body').removeClass('static');
        });
        Ubicacion.inicializar_mapa();
        $("body").on("mouseenter", ".compatibilidad", function () {
            $(this).find(".consolidado").css("opacity",0);
		  	$(this).find(".desglose").css("opacity",1);
			var data = 0;
			data = $(this).find(".cultural .circular-bar-chart").data("percent");
			$(this).find(".cultural .circular-bar-chart").data('easyPieChart').update(0);
			$(this).find(".cultural .circular-bar-chart").data('easyPieChart').update(data);

			data = $(this).find(".academico .circular-bar-chart").data("percent");
			$(this).find(".academico .circular-bar-chart").data('easyPieChart').update(0);
			$(this).find(".academico .circular-bar-chart").data('easyPieChart').update(data);
        });
        $("body").on("mouseleave", ".compatibilidad", function () {
            $(this).find(".consolidado").css("opacity", 1);
            $(this).find(".desglose").css("opacity", 0);
        });
        $('.compatibilidad .consolidado .circular-bar-chart').easyPieChart({
            animate: 2000,
            scaleLength: 0,
            lineWidth: 5,
            barColor: "#1dcfac",
            size: 65,
        });
        $('.cultural .circular-bar-chart').easyPieChart({
            animate: 2000,
            scaleLength: 0,
            lineWidth: 5,
            barColor: "#c0392b",
            size: 65,
        });
        $('.academico .circular-bar-chart').easyPieChart({
            animate: 2000,
            scaleLength: 0,
            lineWidth: 5,
            barColor: "#5d9cf9",
            size: 65,
        });
        //or for example
        var options = {
            max_value: 5,
            step_size: 1,
            symbols: {
                images: {
                    base: '<span class="rating-small"></span>',
                    hover: '<span class="rating-small full"></span>',
                    selected: '<span class="rating-small full"></span>',
                }
            },
            selected_symbol_type: 'images'
        }
        $(".rating-edit").each(function(){
            $(this).rate(options);
            while($(this).rate("getValue") < parseFloat($(this).parent().find(".rating-hidden").val().replace(",", "."))){
                $(this).rate("increment");
            }
        });
        /*$("#rating-linea_carrera").rate(options);
        $("#rating-flexibilidad_horario").rate(options);
        $("#rating-ambiente_trabajo").rate(options);
        $("#rating-salario_beneficios").rate(options);*/

        //$("#rating-linea_carrera").rate("setValue", 3)
        var general_options = {};
        $.extend(general_options, options, {
            symbols: {
                images: {
                    base: '<span class="rating-big"></span>',
                    hover: '<span class="rating-big full"></span>',
                    selected: '<span class="rating-big full"></span>',
                }
            },
            step_size: 0.05
        });
        $("#rating-general").rate(general_options);
        animationInterval = setInterval(function () {
            if ($("#rating-general").rate("getValue") < parseFloat($("#rating-rank").val().replace(",", ".")))
                $("#rating-general").rate("increment")
            else {
                clearInterval(animationInterval);
                $("#rating-general").rate("destroy");
                $("#rating-general").rate($.extend(general_options, {readonly: true}));
            }
        }, 5);
        fnCalculoRanking($("#ranking_linea_carrera"));
        fnCalculoRanking($("#ranking_flexibilidad_horarios"));
        fnCalculoRanking($("#ranking_ambiente_trabajo"));
        fnCalculoRanking($("#ranking_salarios"));

    });
    $('.owl-carousel').owlCarousel({
			 autoPlay: true,
             items: {%if imagenes %} 1 {%else%} 2 {%endif%},
		     singleItem: true,
             loop: true,
             margin: 10,
             pagination: true

    });

    $("#enviar-evaluacion").click(function (e) {
        $("#id_linea_carrera").val($("#rating-linea_carrera").attr("data-rate-value") > 0 ? $("#rating-linea_carrera").attr("data-rate-value") : 0);
        $("#id_flexibilidad_horarios").val($("#rating-flexibilidad_horario").attr("data-rate-value") > 0 ? $("#rating-flexibilidad_horario").attr("data-rate-value") : 0);
        $("#id_ambiente_trabajo").val($("#rating-ambiente_trabajo").attr("data-rate-value") > 0 ? $("#rating-ambiente_trabajo").attr("data-rate-value") : 0);
        $("#id_salarios").val($("#rating-salario_beneficios").attr("data-rate-value") > 0 ? $("#rating-salario_beneficios").attr("data-rate-value") : 0);
        $("#evaluar").click();
    });
    function fnCalculoRanking(item){
        var colorInc = 100/3;
        var val = parseFloat($(item).find(".percent").html().replace(",","."));
        val = (val*100)/5

        if(val != ""
          && !isNaN(val)
          && val <= 100
          && val >= 0)
        {

          var valOrig = val;
          val = 100 - val;

          $(item).find(".progress").parent().removeClass();
          $(item).find(".progress .water").css("top", val + "%");

          if(valOrig < colorInc * 1)
            $(item).find(".progress").parent().addClass("red");
          else if(valOrig < colorInc * 2)
            $(item).find(".progress").parent().addClass("orange");
          else
            $(item).find(".progress").parent().addClass("green");
        }
        else
        {
          $(item).find(".progress").parent().removeClass();
            if (val == 100)
                $(item).find(".progress").parent().addClass("green");
            else if (val == 0)
                $(item).find(".progress").parent().addClass("red");
          $(item).find(".progress .water").css("top", 100 - val + "%");
          $(item).find(".progress .percent").text(val + "%");

        }
    }
    var Ubicacion = {
        map: null,
        marca: null,
        inicializar_mapa: function () {
            var mapCanvas = document.getElementById('map');
            var mapOptions = {
                center: new google.maps.LatLng(-12.0570208,-77.0372896),
                zoom: 8,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            Ubicacion.map = new google.maps.Map(mapCanvas, mapOptions);
            if ($("#id_latitud").html().replace(",",".") != "" && $("#id_latitud").html() != "None") {
                var latitud = $("#id_latitud").html().replace(",",".");
                var longitud = $("#id_longitud").html().replace(",",".");
                var punto = new google.maps.LatLng(latitud, longitud);
                Ubicacion.marcar_mapa(punto);
            }
        },
        marcar_mapa: function (coordenadas) {
            var marker = new google.maps.Marker({
                position: coordenadas,
                map: Ubicacion.map
            });
            Ubicacion.marca = marker;

            Ubicacion.map.setCenter(coordenadas);
            var geocoder = new google.maps.Geocoder();
            geocoder.geocode({
                location: new google.maps.LatLng(coordenadas.lat(),coordenadas.lng())
                }, function (response, status) {
                    if (response != null && response.length > 0 && response.status != "ZERO_RESULTS")
                        $("#id_direccion_map").html(response[0]["formatted_address"]);
            });
        }
    };
</script>
<script src="https://maps.googleapis.com/maps/api/js"></script>
<script src="{% static 'js/owl.carousel.js' %}"></script>
{%endblock js%}